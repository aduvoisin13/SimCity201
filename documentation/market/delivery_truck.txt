OFFICIAL VERSION IS NOW ON THE WIKI

-------------------------------------------DELIVERY TRUCK-------------------------------------------

DATA
List<MyDelivery> mDeliveries;
Map<MarketCookAgent, String> mRestaurants;		//restaurant name

enum DeliveryTruckStatus {READY, DELIVERING, WAITING}

MESSAGES
msgDeliverOrderToCook(Order o) {
	mDeliveries.add(o);
	o.mEvent= XXXXXXXXXXXXXXXXXXXX;
	mStatus = DELIVERING;
}

msgAnimationAtRestaurant(Order o) {
	o.mEvent = TOLD_TO_DELIVER;
}

msgAnimationAtMarket() {
	mStatus = READY;
}

SCHEDULER
if ∃ delivery in mDeliveries ∈ delivery.mStatus = ORDERING & delivery.mEvent = XXXXXXXXXXXXXXXXXXXX
	delivery.mStatus = DELIVERING;
	goToDeliverOrder(delivery);
if ∃ delivery in mDeliveries ∈ delivery.mStatus = DELIVERING & delivery.mEvent = TOLD_TO_DELIVER
	delivery.mStatus = FULFILLING;
if mStatus = READY
	mStatus = WAITING;
	notifyCashier();
else
	DoGoToMarket();

ACTIONS
goToDeliverOrder(Order o) {
	DoGoToRestaurant(mRestaurants.get(o.mPersonRole));	//animation call
}

deliverOrder(Order o) {
	o.mPersonRole.msgHereIsCookOrder(o);
	mDeliveries.remove(o);
}

notifyCashier() {
	msgDeliveryTruckReady(this);
}
